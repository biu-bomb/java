# HTTP和HTTPS

> ==HTTPS = HTTP + SSL/TSL==

|      | HTTP | HTTPS                          |
| ---- | ---- | ------------------------------ |
| 证书 | 无   | 需要                           |
| 加密 | 明文 | 加密                           |
| 状态 | 无   | 有状态<br />身份验证、加密方式 |
| 端口 | 80   | 443                            |
| 安全 | 低   | 高                             |

# HTTPS

![img](../.imgs/https.gif)

| order | client                                 | server                         |
| ----- | -------------------------------------- | ------------------------------ |
| 1     | 发起``https``请求                      |                                |
| 2     |                                        | 返回证书公钥                   |
| 3     | 协商安全等级，并创建会话密钥           |                                |
| 4     | 使用证书公钥加密会话密钥，传输到服务端 |                                |
| 5     |                                        | 使用证书私钥解密，获得会话密钥 |
| 6     | 使用密钥加密传输进行沟通               | 使用密钥加密传输进行沟通       |

# HTTPS优缺点

## 优点

- 有认证功能，确保数据发往正确的客户机和服务器
- 加密传输和身份认证，确保数据发送过程中不被窃取、改变，保证数据完整性
- 时下最安全的的解决方案，虽然不是绝对安全，但是的确增加了中间人的攻击成本
- ``google``排名算法中，``https``的排名比同等的``http``网站搜索排名更高

## 缺点

- 握手耗时，页面加载延时50%，耗电增加10%~20%
- ``https``缓存不如``http``高效，增加数据处理开销和功耗
- ``SSL``证书贵，功能越强证书越贵
- ``SSL``证书需要绑定``IP``，且一个``IP``只能绑定一个域名
  - 不能复用证书，证书成本增加
  - ``IPV4``的``IP``完全不够用
- 安全防护有限
  - 黑客攻击、拒绝服务攻击、服务器劫持等方面无能为力
  - 依赖证书，掌握证书的情况下，加密通信如同虚设
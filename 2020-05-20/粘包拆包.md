# 粘包

| 发生源 | 条件                                                         |
| ------ | ------------------------------------------------------------ |
| 发送端 | 上一个数据小于一个包长度<br />当前数据发送和上一包数据共用发送缓冲 |
| 接收端 | 接收端消费数据，没有及时取出上一包数据<br />当前接收数据与上一包数据共用接收缓冲 |

# 拆包

| 发生源 | 条件                                                         |
| ------ | ------------------------------------------------------------ |
| 发送端 | 数据大于当前发送缓冲区剩余大小<br />拆包，剩余数据留待下一次发送 |
| 发送端 | 数据大于``MSS``，强制拆包，分两次发送                        |

# 解决

> <font color='red'>底层传输必要缓冲，无法在保证效率的情况下底层进行解决，需要上层协议栈进行处理。</font>

| 可行协议 | 细节补充                               |
| -------- | -------------------------------------- |
| 定长数据 | 数据定长，不足补充特定数据，定长解析   |
| 确定边界 | 不停读取，直到确定边界。`(FTP)`        |
| 消息头   | 分离消息头和消息体，消息头明确解析方式 |
| 其他     | 其他                                   |




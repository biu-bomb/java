# 缺页异常

```mermaid
sequenceDiagram

rect rgba(255,0,255,1)
应用程序->>+虚拟内存: malloc or mmap
虚拟内存->>-应用程序: 分配完毕
end

rect rgba(0, 255, 255, 1)
应用程序->>虚拟内存: 读取内存数据
rect rgba(255,255,0,1)
opt 未初始化
虚拟内存->>内核处理: 发出中断
内核处理->>物理内存: 关联物理内存
物理内存->>内核处理: 准备数据并返回
内核处理->>虚拟内存: 数据准备完毕
end
end
虚拟内存->>应用程序: 返回内存数据
end
```

# 中断操作

1. 保存``CPU``现场
2. 分析中断原因
3. 执行对应中断逻辑
4. 恢复``CPU``现场，继续程序执行

> <font color='red'>缺页异常也是一种中断，还是硬件中断。</font>

# 中断类型

| 中断类型        | 举个例子                 |
| --------------- | ------------------------ |
| ``CPU``外部中断 | ``IO``中断<br />时钟中断 |
| ``CPU``内部中断 | 非法操作<br />地址越界   |
| 系统调用        |                          |